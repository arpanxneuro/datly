# Cloudflare Pages Configuration for Datly Documentation
# Deploy to Cloudflare Pages: wrangler pages deploy public

name = "datly-docs"
type = "javascript"
account_id = ""  # Set your Cloudflare account ID here
project_name = "datly-docs"

# Build configuration
[build]
command = "hugo --minify"
cwd = "./"
watch_paths = ["content/**", "themes/**", "archetypes/**", "hugo.toml"]
root_dir = "public"

# Build caching
[build.upload]
format = "modules"

# Environment configuration
[env.production]
name = "production"
routes = [
  { pattern = "datly.pages.dev", zone_name = "datly.pages.dev" }
]

[env.staging]
name = "staging"
routes = [
  { pattern = "staging-datly.pages.dev", zone_name = "staging-datly.pages.dev" }
]

# Custom headers for security and performance
[[env.production.routes]]
pattern = "datly.pages.dev/*"
zone_name = "datly.pages.dev"

[env.production.analytics_engine]
enabled = false

# Performance and security settings
[triggers.crons]

# Analytics and monitoring
[analytics]
enabled = false

# Environment variables (configure in Cloudflare dashboard)
# - HUGO_ENV=production (set via dashboard)

# Redirects and URL rules (can also be managed via _redirects file)
# See _redirects in static/ folder for URL redirect rules

# Minify configuration
[build.minify]
js = true
css = true
html = true

# Cache rules for static assets
[cache]
default_cache_ttl = 86400      # 24 hours
browser_cache_ttl = 3600       # 1 hour

# Security headers (can also use _headers file)
# See _headers in static/ folder for detailed security headers

# Site configuration
[site]
include = [
  "public/**/*"
]
exclude = [
  "node_modules/**/*",
  ".git/**/*",
  "themes/**/*",
  "content/**/*",
  ".gitignore",
  "*.md"
]

# Deployment settings
[deployment]
route = "datly.pages.dev/*"
namespace_id = ""  # Leave empty for default namespace
